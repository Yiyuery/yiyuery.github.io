<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>给 Vuepress 添加暗色夜间模式 | Yiyuery</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/favicon.ico">
    <meta name="description" content="Yiyuery's 个人博客">
    <link rel="preload" href="/assets/css/0.styles.fac40609.css" as="style"><link rel="preload" href="/assets/js/app.839ced15.js" as="script"><link rel="preload" href="/assets/js/4.3fbc1f96.js" as="script"><link rel="preload" href="/assets/js/45.e77b2e3a.js" as="script"><link rel="prefetch" href="/assets/js/1.43a347b2.js"><link rel="prefetch" href="/assets/js/10.9753ee5d.js"><link rel="prefetch" href="/assets/js/11.96c59566.js"><link rel="prefetch" href="/assets/js/12.2c50efec.js"><link rel="prefetch" href="/assets/js/13.5d6e55a8.js"><link rel="prefetch" href="/assets/js/14.fc442e96.js"><link rel="prefetch" href="/assets/js/15.24339c79.js"><link rel="prefetch" href="/assets/js/16.1587d289.js"><link rel="prefetch" href="/assets/js/17.44142bfd.js"><link rel="prefetch" href="/assets/js/18.994bb200.js"><link rel="prefetch" href="/assets/js/19.ca759cda.js"><link rel="prefetch" href="/assets/js/2.52d476cc.js"><link rel="prefetch" href="/assets/js/20.979ad63c.js"><link rel="prefetch" href="/assets/js/21.fecc9d80.js"><link rel="prefetch" href="/assets/js/22.3e99d924.js"><link rel="prefetch" href="/assets/js/23.951d9b97.js"><link rel="prefetch" href="/assets/js/24.bad04352.js"><link rel="prefetch" href="/assets/js/25.ce195067.js"><link rel="prefetch" href="/assets/js/26.7b3581a7.js"><link rel="prefetch" href="/assets/js/27.efc77ae3.js"><link rel="prefetch" href="/assets/js/28.16eb2f91.js"><link rel="prefetch" href="/assets/js/29.7772d15e.js"><link rel="prefetch" href="/assets/js/30.3870d4d1.js"><link rel="prefetch" href="/assets/js/31.0f4cfbf5.js"><link rel="prefetch" href="/assets/js/32.29d81c04.js"><link rel="prefetch" href="/assets/js/33.28affd1f.js"><link rel="prefetch" href="/assets/js/34.d28c7114.js"><link rel="prefetch" href="/assets/js/35.d7bb0604.js"><link rel="prefetch" href="/assets/js/36.ebab3576.js"><link rel="prefetch" href="/assets/js/37.0eb5a00d.js"><link rel="prefetch" href="/assets/js/38.9db427c3.js"><link rel="prefetch" href="/assets/js/39.53ecfed9.js"><link rel="prefetch" href="/assets/js/40.b2df18d9.js"><link rel="prefetch" href="/assets/js/41.b6970575.js"><link rel="prefetch" href="/assets/js/42.5d438713.js"><link rel="prefetch" href="/assets/js/43.0f984b43.js"><link rel="prefetch" href="/assets/js/44.4a9567c2.js"><link rel="prefetch" href="/assets/js/46.db689d82.js"><link rel="prefetch" href="/assets/js/47.ca290c98.js"><link rel="prefetch" href="/assets/js/48.cc29300b.js"><link rel="prefetch" href="/assets/js/49.f43fa070.js"><link rel="prefetch" href="/assets/js/5.8663838d.js"><link rel="prefetch" href="/assets/js/50.5ac4404a.js"><link rel="prefetch" href="/assets/js/51.20121ae0.js"><link rel="prefetch" href="/assets/js/52.d225ba88.js"><link rel="prefetch" href="/assets/js/53.adeb5a3a.js"><link rel="prefetch" href="/assets/js/54.a4dc7855.js"><link rel="prefetch" href="/assets/js/55.4b88ddc7.js"><link rel="prefetch" href="/assets/js/56.a13331f5.js"><link rel="prefetch" href="/assets/js/57.885d087b.js"><link rel="prefetch" href="/assets/js/58.a3064fd9.js"><link rel="prefetch" href="/assets/js/59.7e0d1f6e.js"><link rel="prefetch" href="/assets/js/6.83d9063b.js"><link rel="prefetch" href="/assets/js/60.33d66471.js"><link rel="prefetch" href="/assets/js/61.d332eaa5.js"><link rel="prefetch" href="/assets/js/62.8eaf5a15.js"><link rel="prefetch" href="/assets/js/63.6e0c7f61.js"><link rel="prefetch" href="/assets/js/64.17534d3f.js"><link rel="prefetch" href="/assets/js/65.40d814d7.js"><link rel="prefetch" href="/assets/js/66.9279a738.js"><link rel="prefetch" href="/assets/js/67.5cdb9fd6.js"><link rel="prefetch" href="/assets/js/68.26c5c99d.js"><link rel="prefetch" href="/assets/js/69.d349f923.js"><link rel="prefetch" href="/assets/js/7.6cb83fee.js"><link rel="prefetch" href="/assets/js/8.d6104416.js"><link rel="prefetch" href="/assets/js/9.c85ef583.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fac40609.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><!----> <div id="my-bg"></div> <header class="navbar my-nav"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logoko.png" alt="Yiyuery" class="logo"> <span class="site-name can-hide">Yiyuery</span></a> <div class="links"><div class="color-picker"><a class="color-button">
		切换
	</a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">切换主题</h4> <ul class="color-mode-options"><li class="dark">暗</li><li class="auto active">自动</li><li class="light">亮</li></ul></div></div></div> <!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">📃 文章</a></div><div class="nav-item"><a href="/zhuanlan/" class="nav-link">📰 专栏</a></div><div class="nav-item"><a href="/zone/" class="nav-link">🤪 动态</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔨 工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">🚥 导航</a></li><li class="dropdown-item"><!----> <a href="/links/" class="nav-link">🔗 友链</a></li></ul></div></div> <!----></nav> <a href="https://github.com/Yiyuery/" target="_blank" class="can-hide" style="display: flex; align-items: center; margin-left: 10px;"><img src="/github.png" class="my-svg" style="width: 1.4rem; height: 1.4rem;"></a></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">📃 文章</a></div><div class="nav-item"><a href="/zhuanlan/" class="nav-link">📰 专栏</a></div><div class="nav-item"><a href="/zone/" class="nav-link">🤪 动态</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔨 工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">🚥 导航</a></li><li class="dropdown-item"><!----> <a href="/links/" class="nav-link">🔗 友链</a></li></ul></div></div> <!----></nav>  <!----> </aside> <div><main class="page need-zoom"> <div class="my-main"><div class="my-main-left"><div class="my-title-box"><h2>给 Vuepress 添加暗色夜间模式</h2> <div class="my-title-info"><span id="/vuepress-dark-mode/" data-flag-title="给 Vuepress 添加暗色夜间模式" class="leancloud-visitors"><span>作者：玉川</span>  
            <span>2020 年 5 月 19 日  </span> <i class="el-icon-view" style="margin-right: 3px;"></i> <span class="leancloud-visitors-count"></span></span></div></div> <div class="theme-default-content content__default"><h2 id="_1-前言"><a href="#_1-前言" class="header-anchor">#</a> 1. 前言</h2> <p>随着各个系统都加入了「亮色/暗色模式」切换，Chrome 和 Edge 浏览器也支持了根据系统切换主题，作为互联网前沿的弄潮儿（没错，说你呢），咱们也要追上潮流不是，所以通过这篇文章你可以学习到如何在自己的 Vuepress 博客里面使用暗色模式。<a href="https://www.xerrors.fun" target="_blank" rel="noopener noreferrer">预览<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>前提：如果想要完成这个工作，需要一定的知识储备：</p> <ul><li>有过使用 Vue 开发的经验</li> <li>了解 Stylus 的用法（几分钟）</li> <li>对 Vuepress 的自定义配置有一点点的了解，可以参考「<a href="https://www.xerrors.fun/decorate-vuepress/" target="_blank" rel="noopener noreferrer">Vuepress 改造指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>」</li></ul> <p>当然如果是单纯想要做一个好看的博客网站，同时还想要支持暗色模式的话，建议直接使用「 <a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">vuepress-theme-reco<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 」这个主题，配置起来方便省心，文档写的也很好。要是想要属于自己的主题、想要折腾锻炼自己的话，那么这篇文章绝对就是适合你的。</p> <p><strong>高能提醒</strong>：由于本人说话比较啰（dou）嗦（bi），所以下面会介绍的比较详细，能力强的同学可以使用旁边的目录索引跳转查看，我也尽量在重要的地方做出提醒；这次的暗色模式是我从早上八点折腾到晚上两点才弄完的，所以有必要来记录一下今天的工作。</p> <p>做出一个出色的暗色模式需要几步？</p> <ol><li><strong>设计</strong>出亮色以及暗色的配色；</li> <li>单独<strong>测试</strong>亮色以及暗色的表现；</li> <li>加上自动和手动<strong>切换</strong>主题的功能；</li></ol> <h2 id="_2-设计主题配色"><a href="#_2-设计主题配色" class="header-anchor">#</a> 2. 设计主题配色</h2> <p>我虽然不是一个设计师，但是对美感有一定的追求，所以在配色的时候不能瞎配，要有准则！不然配出来的色很丑很杀马特，所以我先学习了很久的暗色模式。</p> <p>我前一天晚上临睡前拜读了「<a href="https://zhuanlan.zhihu.com/p/78713832" target="_blank" rel="noopener noreferrer">暗黑模式的8个设计要点<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>」，了解配色里面需要注意的坑，然后又通读「<a href="https://www.zcool.com.cn/article/ZMTAxMjAxNg==.html" target="_blank" rel="noopener noreferrer">深色模式的文本配色<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>」，知道怎样去使用颜色的明暗关系来改变主题，还翻了翻「<a href="https://medium.com/uxabc/ios-13-8227dc9bcbb8" target="_blank" rel="noopener noreferrer">UX/UI 設計師的 iOS 13 攻略<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>」。</p> <p>我辗转反侧夜不能寐，最终我终于决定了「抄<a href="https://sspai.com/" target="_blank" rel="noopener noreferrer">少数派<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的配色」~毕竟人家是做好的嘛，我是个门外汉，正好少数派也是阅读类的网站（本身也是我很喜欢的一个网站）。</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519020958.png" alt="少数派亮色主页"></p> <p>所以我首先分析了少数派的亮色与暗色的文字以及背景的颜色（一个个取色器取出来的），下面是少数派官网的几个截图，上面对主要的颜色进行了标注（看不太清，没关系，后面有色卡）：</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519021033.png" alt="少数派暗色主页"></p> <p>最终，提取出来有代表性的颜色，其他的几个相近的颜色可以在 stylus 里面由 lighten 和 darken 内置函数来转换得到：</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token comment">// dark mode scheme</span>
<span class="token variable-declaration"><span class="token variable">$darkMainColor</span> <span class="token operator">=</span> <span class="token hexcode">#f94135</span> 	 <span class="token comment">// 主题色</span></span>
<span class="token variable-declaration"><span class="token variable">$darkPrimaryText</span> <span class="token operator">=</span> <span class="token hexcode">#ffffff</span>   <span class="token comment">// 文字的首要颜色</span></span>
<span class="token variable-declaration"><span class="token variable">$darkRegularText</span> <span class="token operator">=</span> <span class="token hexcode">#b8b8b8</span>   <span class="token comment">// 常规文字颜色</span></span>
<span class="token variable-declaration"><span class="token variable">$darkSecondaryText</span> <span class="token operator">=</span> <span class="token hexcode">#7f7f7f</span> <span class="token comment">// 次要文字颜色</span></span>
<span class="token variable-declaration"><span class="token variable">$darkBorder</span> <span class="token operator">=</span> <span class="token hexcode">#373737</span>        <span class="token comment">// 边框颜色</span></span>
<span class="token variable-declaration"><span class="token variable">$darkBoundary</span> <span class="token operator">=</span> <span class="token hexcode">#171514</span>      <span class="token comment">// 边界颜色</span></span>
<span class="token variable-declaration"><span class="token variable">$darkBgColor</span> <span class="token operator">=</span> <span class="token hexcode">#171514</span>       <span class="token comment">// 深色背景颜色</span></span>
<span class="token variable-declaration"><span class="token variable">$darkCard</span> <span class="token operator">=</span> <span class="token hexcode">#232222</span>          <span class="token comment">// 深色卡片颜色</span></span>
<span class="token comment">// light mode scheme</span>
<span class="token variable-declaration"><span class="token variable">$lightMainColor</span> <span class="token operator">=</span> <span class="token hexcode">#d71a1b</span></span>
<span class="token variable-declaration"><span class="token variable">$lightPrimaryText</span> <span class="token operator">=</span> <span class="token hexcode">#292525</span></span>
<span class="token variable-declaration"><span class="token variable">$lightSecondaryText</span> <span class="token operator">=</span> <span class="token hexcode">#8e8787</span></span>
<span class="token variable-declaration"><span class="token variable">$lightRegularText</span> <span class="token operator">=</span> <span class="token hexcode">#4c4e4d</span></span>
<span class="token variable-declaration"><span class="token variable">$lightBorder</span> <span class="token operator">=</span> <span class="token hexcode">#e5e5e5</span></span>
<span class="token variable-declaration"><span class="token variable">$lightBoundary</span> <span class="token operator">=</span> <span class="token hexcode">#e5e5e5</span></span>
<span class="token variable-declaration"><span class="token variable">$lightBgColor</span> <span class="token operator">=</span> <span class="token hexcode">#f4f4f4</span></span>
<span class="token variable-declaration"><span class="token variable">$lightCard</span> <span class="token operator">=</span> <span class="token hexcode">#ffffff</span></span>
<span class="token comment">// 后期补充的遮罩颜色</span>
<span class="token variable-declaration"><span class="token variable">$lightMask</span> <span class="token operator">=</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">)</span> </span><span class="token comment">// 遮罩颜色</span></span>
<span class="token variable-declaration"><span class="token variable">$darkMask</span> <span class="token operator">=</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">)</span></span></span>
</code></pre></div><blockquote><p>stylus 里面的变量是没有必要使用 $ 开头的，但是因为使用习惯我加上了。</p></blockquote> <p>在上面为了有更好的适用性，我增加了两种模式的「遮罩颜色」，当然在此基础上还可以进行补充，比如设置不同等级的 border color，或者增加不同的 box-shadow 来实现更好的阴影以及高光效果，各位有才的同学自行添加。下面是两种主题的配色板：</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519022433.png" alt=""></p> <p>这里顺带提一句题外话，少数派的配色使用的是「纯白背景 + 灰色字体 」和 「灰色背景 + 淡白字体」的组合，这样不会让眼睛因为对比度过大，而感受到刺激强让眼睛疲劳，同时主题的红色也在暗色模式下降低了亮度。</p> <h2 id="_3-测试亮色以及暗色的表现"><a href="#_3-测试亮色以及暗色的表现" class="header-anchor">#</a> 3. 测试亮色以及暗色的表现</h2> <p>由于我之前个人的编程习惯并不是很好，导致我写页面的时候，想用什么颜色就使用什么颜色 了，这也就导致现在要进行「全局管理」的话，非常的麻烦；</p> <h3 id="全局颜色管理"><a href="#全局颜色管理" class="header-anchor">#</a> 全局颜色管理</h3> <p>所以我花费了大量的时间在将全局的颜色进行统一。我们可以先将上面的颜色保存到 <code>.vuepress/style/palette.styl</code> 里面（方便测试），这样我们可以直接在主题中的其他文件中使用这些颜色变量不需要导入。</p> <p>那么下一步就是修改自己的其他页面所用到的颜色了，我是用的是最笨的方法，「搜索替换」（我找不到更好的办法了）</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519121523.png" alt=""></p> <p>这里我们需要把之前混乱的颜色，使用咱们上面「配色板」里面的颜色来替代，如果感觉颜色不够用，可以适当添加合适的颜色。</p> <p>在进行两种模式的样式单独测试的时候，我们总不能老是搜索替换吧，最简单的使用办法就是变量代换，打个比方，我们有：</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token comment">// .vuepress/style/palette.styl</span>
<span class="token variable-declaration"><span class="token variable">$darkMainColor</span> <span class="token operator">=</span> <span class="token hexcode">#f94135</span></span>
<span class="token variable-declaration"><span class="token variable">$lightMainColor</span> <span class="token operator">=</span> <span class="token hexcode">#d71a1b</span></span>
<span class="token comment">// 测试亮色主题时</span>
<span class="token variable-declaration"><span class="token variable">$mainColor</span> <span class="token operator">=</span> $lightMainColor</span>
<span class="token comment">// 测试暗色主题时</span>
<span class="token variable-declaration"><span class="token variable">$mainColor</span> <span class="token operator">=</span> $darkMainColor</span>
</code></pre></div><p>这样我们在其他文档中就可以使用 <code>$mainColor</code> 来表示主题色，也是为了咱们之后进行主题切换进行铺路；如：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
.tetle
    color $mainColor
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里有几点是需要注意的：</p> <ol><li>当涉及到颜色修改的时候，为了获得更好的效果，建议在浏览器的「调试窗口」修改来看看效果；</li> <li>两种模式需要「单独替换」，当亮色模式测试没有问题之后，再对暗色模式进行测试，当两个模式都单独测试完美之后，再进行主题切换工作。避免一次修改太多，出现问题不知道哪里出的问题。</li> <li>除了「 color 」之外，「 border 」的颜色也是要注意的地方。</li> <li>要么使用版本控制，要么对项目的副本进行操作，避免出现不可逆的问题出现。</li></ol> <h3 id="element-ui-的自定义主题"><a href="#element-ui-的自定义主题" class="header-anchor">#</a> Element UI 的自定义主题</h3> <p><a href="https://wangtunan.github.io/blog/vuepress/#%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93" target="_blank" rel="noopener noreferrer">在Vuepress中使用第三方库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>对于使用 Element UI 组件库的同学而言，修改上面的颜色还算可以接受，虽然繁琐了一点点，但是想要获得最终的结果也还是不难的；但是因为 ELement UI 组件库有自己的配色，想要修改内部的配色就会变得非常麻烦，比如我要把 tab 标签的边框颜色改成深色：</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519030944.png" alt=""></p> <p>我就需要下面这样才能达到效果：</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector"><span class="token comment">// 并没有完全遵循 stylus 的推荐语法，写的很乱，大家不要跟我学</span>
&lt;style lang=&quot;stylus&quot;&gt;
.el-tabs--card&gt;.el-tabs__header .el-tabs__item.is-active <span class="token punctuation">{</span></span>
  <span class="token property-declaration"><span class="token property">border-bottom</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span>
  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $mainColor<span class="token punctuation">;</span></span>
  <span class="token property-declaration"><span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">600</span><span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>

<span class="token selector">.el-tabs--card&gt;.el-tabs__header <span class="token punctuation">{</span></span>
  <span class="token property-declaration"><span class="token property">border-bottom</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid $bgColor<span class="token punctuation">;</span></span>
  <span class="token selector">.el-tabs__item <span class="token punctuation">{</span></span>
    <span class="token property-declaration"><span class="token property">border-left-color</span><span class="token punctuation">:</span> $bgColor</span>
    <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $seconaryColor<span class="token punctuation">;</span></span>
    <span class="token selector">&amp;:hover <span class="token punctuation">{</span></span>
      <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $mainColor<span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.el-tabs--card&gt;.el-tabs__header .el-tabs__nav <span class="token punctuation">{</span></span>
  <span class="token property-declaration"><span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid $bgColor<span class="token punctuation">;</span></span>
  <span class="token property-declaration"><span class="token property">border-bottom</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>
&lt;/style&gt;
</code></pre></div><p>可以看到做一个小小的修改都非常非常的麻烦，要是涉及到修改弹窗之类复杂的组件的样式的话可能就要累死人了，那么以后每添加一个 Element UI 组件都要进行暗色模式适配，不可取；</p> <p>所以我们可以使用 Element UI 的「<a href="https://element.eleme.cn/#/zh-CN/component/custom-theme" target="_blank" rel="noopener noreferrer">在线主题编辑器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 」来生成我们所需要的暗色模式的主题文件，在这里可以可视化地修改各个颜色变量的值；这里的配色可以参考上面的配色卡，向下拉可以看到每个组件的表现效果；当我们把颜色调成我们想要的主题之后，点击右上角可以「下载」主题配置文件。</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519082245.png" alt="Elementui"></p> <p>下载之后会得到一个 style 压缩包，压缩包的目录结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>style
 ├── config.json
 └── theme
     ├── fonts
     │   ├── element-icons.ttf
     │   └── element-icons.woff
     └── index.css // 我们想要的
</code></pre></div><p>由于有两份主题需要配置，所以最终会在 ElementUI 的主题编辑器里面得到两份样式文件，我们可以把两份 css 样式文件放在同一个样式文件夹里面，然后放入到项目文件夹里面，我选择放在了 <code>.vuepress/public/style/</code> 里面。config.json 文件我们暂时用不到。</p> <div class="language- extra-class"><pre class="language-text"><code> theme
 ├── fonts
 │   ├── element-icons.ttf
 │   └── element-icons.woff
 └── light.css // 我们想要的
 └── dark.css // 我们想要的
</code></pre></div><p>之后需要在 <code>.vuepress/enhanceApp.js</code> 引入样式文件，由于我们现在还没有加入主题切换功能，所以在测试的暗色模式的时候，就「仅仅」引入暗色的样式文件，测试亮色模式的时候「仅仅」引入亮色的样式文件。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Element <span class="token keyword">from</span> <span class="token string">'element-ui'</span>
<span class="token keyword">import</span> <span class="token string">'./public/style/theme/light.css'</span> <span class="token comment">// 仅在测试亮色模式时启用</span>
<span class="token keyword">import</span> <span class="token string">'./public/style/theme/dark.css'</span>  <span class="token comment">// 仅在测试暗色模式时启用</span>
<span class="token keyword">import</span> animated <span class="token keyword">from</span> <span class="token string">'animate.css'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  Vue<span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Element<span class="token punctuation">,</span> animated<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样我们就可以愉快的进行暗色模式的测试工作了，测试其实就是看看有没有颜色不对的地方，影响观感的地方，主要表现在以下几个地方：</p> <ul><li>对比度太强，也就是太刺眼，主要表现在边框以及字体上面；</li> <li>对比度太低，字体或者组件处于难以看清的情况；</li> <li>表面上看起来正常，但是存在 <code>:hover</code> <code>:focus</code> 等激活之后样式发生变化；</li></ul> <p>这是我的测试结果，尚可：</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519085226.png" alt=""></p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519085307.png" alt=""></p> <h2 id="_4-实现主题的切换功能"><a href="#_4-实现主题的切换功能" class="header-anchor">#</a> 4. 实现主题的切换功能</h2> <p>到这一步的话，说明已经对两种配色都进行了单独的测试，且颜色适配的都挺好；那么关于主题切换可以使用下面的步骤：</p> <h3 id="css-媒体特性"><a href="#css-媒体特性" class="header-anchor">#</a> CSS 媒体特性</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-color-scheme" target="_blank" rel="noopener noreferrer">prefers-color-scheme<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是 CSS 的一个新特性，用于检测用户是否有将系统的主题色设置为亮色或者暗色；现在已经被主流浏览器所支持。</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519090120.png" alt="浏览器兼容性"></p> <p>但是单单使用 prefer-color-scheme 无法实现手动切换主题，而且也没法对 ElementUI 的主题切换，所以还需要采用其他的办法。</p> <h3 id="css变量"><a href="#css变量" class="header-anchor">#</a> CSS变量</h3> <p>对于切换方法我本身是一点头绪都没有的，但是后来我看到了「 <a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">vuepress-theme-reco<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 」这个主题，这个主题的主题切换功能写的很棒啊，可不可以~借鉴一下啊~嘿嘿，所以后面的主题切换方法是借鉴了这个作者的实现方法。<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/--*" target="_blank" rel="noopener noreferrer">自定义属性 (--*)：CSS变量<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>首先，我们创建一个样式文件 <code>docs/.vuepress/theme/styles/mode.styl</code>：</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token selector">:root</span>
  <span class="token property-declaration"><span class="token property">--main-color</span> $lightMainColor</span>
  <span class="token property-declaration"><span class="token property">--regular-text</span> $lightRegularText</span>
  <span class="token property-declaration"><span class="token property">--secondary-text</span> $lightSecondaryText</span>
  <span class="token property-declaration"><span class="token property">--primary-text</span> $lightPrimaryText</span>
  <span class="token property-declaration"><span class="token property">--bg-color</span> $lightbgColor</span>
  <span class="token property-declaration"><span class="token property">--card-color</span> $lightCard</span>
  <span class="token property-declaration"><span class="token property">--border-color</span> $lightBorder</span>
  <span class="token property-declaration"><span class="token property">--box-shadow</span> $lightShadow</span>
  <span class="token property-declaration"><span class="token property">--mask-color</span> $lightMaskColor</span>
  <span class="token atrule-declaration"><span class="token atrule">@media</span> <span class="token punctuation">(</span>prefers-color-scheme<span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span>
    <span class="token property-declaration"><span class="token property">--main-color</span> $darkMainColor</span>
    <span class="token property-declaration"><span class="token property">--regular-text</span> $darkRegularText</span>
    <span class="token property-declaration"><span class="token property">--secondary-text</span> $darkSecondaryText</span>
    <span class="token property-declaration"><span class="token property">--primary-text</span> $darkPrimaryText</span>
    <span class="token property-declaration"><span class="token property">--bg-color</span> $darkbgColor</span>
    <span class="token property-declaration"><span class="token property">--card-color</span> $darkCard</span>
    <span class="token property-declaration"><span class="token property">--border-color</span> $darkBorder</span>
    <span class="token property-declaration"><span class="token property">--box-shadow</span> $darkShadow</span>
    <span class="token property-declaration"><span class="token property">--mask-color</span> $darkMaskColor</span>
</code></pre></div><p>第一行的 <code>:root</code> 会在后面用到；样式文件里带有前缀<code>--</code>的属性名，比如 <code>--main--color</code>，表示的是带有值的「<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/--*" target="_blank" rel="noopener noreferrer">自定义属性<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>」，其可以通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/var" target="_blank" rel="noopener noreferrer"><code>var</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 函数在全文档范围内复用的。例如：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
.tetle
    color <span class="token function">var</span><span class="token punctuation">(</span>--main-color<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里要注意在 <code>docs/.vuepress/theme/styles/index.styl</code> 中引入这个新建的样式文件：</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code>……
<span class="token atrule-declaration"><span class="token atrule">@require</span> <span class="token string">'./toc'</span></span>
<span class="token atrule-declaration"><span class="token atrule">@require</span> <span class="token string">'./mode'</span> <span class="token comment">// 这里</span></span>
……
</code></pre></div><h3 id="创建-mode-组件"><a href="#创建-mode-组件" class="header-anchor">#</a> 创建 Mode 组件</h3> <p>首先在 <code>docs/.vuepress/theme/components/Mode</code> 文件夹下面新建 4 个文件，为了不影响也读体验，文件里面的代码在本小节的最后面可以看到。</p> <div class="language- extra-class"><pre class="language-text"><code>Mode
 ├── applyMode.js
 ├── index.vue
 ├── modeOptions.js
 └── ModePicker.vue
</code></pre></div><p>调用关系有一丢丢复杂，有基础的同学可能更容易理解，我这里就简单的介绍一下这些文件的功能以及工作原理：</p> <ul><li><code>modeOption.js</code> 里面是亮色以及暗色的「颜色变量」。</li> <li><code>applyMode.js</code> 里面定义了两个函数一个是 <code>render (mode)</code>，用来「渲染主题」，主要功能是将颜色变量应用到文档（mode.styl）里面。<code>applyMode (mode)</code> 函数就是实现手动与自动的「切换逻辑」，原理很简单，可以自行阅读。</li> <li><code>ModePicker</code> 和 <code>index.vue</code> 就是实现样式切换的组件，读一读就能理解工作原理。</li></ul> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519102528.png" alt=""></p> <p>上图是我对工作原理的一种简化描述，这个方法的核心就是利用动态修改定义于 <code>mode.styl</code> 里面的 CSS 变量；这样我们就可以在项目中使用动态的 CSS 变量来表示样式。所以在此基础上，还需要把文档中的 <code>$MainColor</code> 之类的修改为 <code>var(--main-color)</code> 等等；在 VS Code 里面进行「搜索替换」的速度还是很快的。</p> <div class="language- extra-class"><pre class="language-text"><code>var(--main-color)      &lt;-   $MainColor
var(--regular-text)    &lt;-   $RegularText
var(--secondary-text)  &lt;-   $SecondaryText
var(--primary-text)    &lt;-   $PrimaryText
var(--bg-color)        &lt;-   $bgColor
var(--card-color)      &lt;-   $Card
var(--border-color)    &lt;-   $Border
var(--box-shadow)      &lt;-   $Shadow
var(--mask-color)      &lt;-   $MaskColor
</code></pre></div><p>但是，这也就导致了一个问题，使用 CSS 变量之后，就不能使用 「lighten」和「darken」这些 Stylus 内置的函数了，<code>lighten(var(--main-color), 30%)</code> 是无效的，因为 Stylus 在进行预处理的时候变量的值还没确定，所以没有办法使用这些内置函数，也就是没辙了呗……（如果读者有什么解决办法，务必告诉我，拜托了）</p> <blockquote><p>modeOption.js</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// modeOption.js</span>
<span class="token keyword">const</span> modeOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    light<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'--main-color'</span> <span class="token operator">:</span> <span class="token string">'#d71a1b'</span><span class="token punctuation">,</span>
        <span class="token string">'--regular-text'</span> <span class="token operator">:</span> <span class="token string">'#4c4e4d'</span><span class="token punctuation">,</span>
        <span class="token string">'--secondary-text'</span> <span class="token operator">:</span> <span class="token string">'#8e8787'</span><span class="token punctuation">,</span>
        <span class="token string">'--primary-text'</span> <span class="token operator">:</span> <span class="token string">'#292525'</span><span class="token punctuation">,</span>
        <span class="token string">'--bg-color'</span> <span class="token operator">:</span> <span class="token string">'#f4f4f4'</span><span class="token punctuation">,</span>
        <span class="token string">'--card-color'</span> <span class="token operator">:</span> <span class="token string">'#ffffff'</span><span class="token punctuation">,</span>
        <span class="token string">'--border-color'</span> <span class="token operator">:</span> <span class="token string">'#e5e5e5'</span><span class="token punctuation">,</span>
        <span class="token string">'--box-shadow'</span> <span class="token operator">:</span> <span class="token string">'rgba(34, 36, 38, 0.15)'</span><span class="token punctuation">,</span>
        <span class="token string">'--mask-color'</span> <span class="token operator">:</span> <span class="token string">'rgba(255,255,255,0.9)'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    dark<span class="token operator">:</span> <span class="token punctuation">{</span>      
        <span class="token string">'--main-color'</span> <span class="token operator">:</span> <span class="token string">'#f94135'</span><span class="token punctuation">,</span>
        <span class="token string">'--regular-text'</span> <span class="token operator">:</span> <span class="token string">'#b8b8b8'</span><span class="token punctuation">,</span>
        <span class="token string">'--secondary-text'</span> <span class="token operator">:</span> <span class="token string">'#7f7f7f'</span><span class="token punctuation">,</span>
        <span class="token string">'--primary-text'</span> <span class="token operator">:</span> <span class="token string">'#ffffff'</span><span class="token punctuation">,</span>
        <span class="token string">'--bg-color'</span> <span class="token operator">:</span> <span class="token string">'#171514'</span><span class="token punctuation">,</span>
        <span class="token string">'--card-color'</span> <span class="token operator">:</span> <span class="token string">'#232222'</span><span class="token punctuation">,</span>
        <span class="token string">'--border-color'</span> <span class="token operator">:</span> <span class="token string">'#373737'</span><span class="token punctuation">,</span>
        <span class="token string">'--box-shadow'</span> <span class="token operator">:</span> <span class="token string">'rgba(34, 36, 38, 0.15)'</span><span class="token punctuation">,</span>
        <span class="token string">'--mask-color'</span> <span class="token operator">:</span> <span class="token string">'rgba(0,0,0,0.9)'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">export</span> <span class="token keyword">default</span> modeOptions
</code></pre></div><blockquote><p>applyMode.js</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// applyMode.js</span>
<span class="token keyword">import</span> modeOptions <span class="token keyword">from</span> <span class="token string">'./modeOptions'</span>

<span class="token comment">// 渲染主题</span>
<span class="token keyword">function</span> <span class="token function">render</span> <span class="token punctuation">(</span><span class="token parameter">mode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// mode.styl</span>
  <span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">':root'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> modeOptions<span class="token punctuation">[</span>mode<span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> k <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rootElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> options<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 修改 body 的类</span>
  document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> mode <span class="token operator">+</span> <span class="token string">'-mode'</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Sets a color scheme for the website.
 * If browser supports &quot;prefers-color-scheme&quot;, 'auto' mode will respect the setting for light or dark mode
 * otherwise it will set a dark theme during night time
 */</span>
<span class="token comment">// 应用主题</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">applyMode</span> <span class="token punctuation">(</span><span class="token parameter">mode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">!==</span> <span class="token string">'auto'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span>mode<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> isDarkMode <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches
  <span class="token keyword">const</span> isLightMode <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: light)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches

  <span class="token keyword">if</span> <span class="token punctuation">(</span>isDarkMode<span class="token punctuation">)</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'dark'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLightMode<span class="token punctuation">)</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'light'</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isDarkMode <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isLightMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'You specified no preference for a color scheme or your browser does not support it. I schedule dark mode during night time.'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> hour <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hour <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token operator">||</span> hour <span class="token operator">&gt;=</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'dark'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'light'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>ModePicker.vue</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mode-options<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>切换主题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color-mode-options<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(mode, index) in modeOptions<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getClass(mode.mode)<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectMode(mode.mode)<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>{{ mode.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> applyMode <span class="token keyword">from</span> <span class="token string">'./applyMode.js'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'ModeOptions'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      modeOptions<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> mode<span class="token operator">:</span> <span class="token string">'dark'</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'暗'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> mode<span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'自动'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> mode<span class="token operator">:</span> <span class="token string">'light'</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">'亮'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      currentMode<span class="token operator">:</span> <span class="token string">'auto'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// modePicker 开启时默认使用用户主动设置的模式</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentMode <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'mode'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$themeConfig<span class="token punctuation">.</span>mode <span class="token operator">||</span> <span class="token string">'auto'</span>
    <span class="token comment">// Dark and Light autoswitches</span>
    <span class="token comment">// 为了避免在 server-side 被执行，故在 Vue 组件中设置监听器</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
    window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      that<span class="token punctuation">.</span>$data<span class="token punctuation">.</span>currentMode <span class="token operator">===</span> <span class="token string">'auto'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">applyMode</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>$data<span class="token punctuation">.</span>currentMode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: light)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      that<span class="token punctuation">.</span>$data<span class="token punctuation">.</span>currentMode <span class="token operator">===</span> <span class="token string">'auto'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">applyMode</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>$data<span class="token punctuation">.</span>currentMode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">applyMode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentMode<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">selectMode</span> <span class="token punctuation">(</span><span class="token parameter">mode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentMode <span class="token operator">=</span> mode
        <span class="token function">applyMode</span><span class="token punctuation">(</span>mode<span class="token punctuation">)</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'mode'</span><span class="token punctuation">,</span> mode<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getClass</span> <span class="token punctuation">(</span><span class="token parameter">mode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> mode <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentMode <span class="token operator">?</span> mode <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> active</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@require</span> <span class="token string">'../../styles/mode.styl'</span>
.mode-options
  background-color <span class="token function">var</span><span class="token punctuation">(</span>--bg-color<span class="token punctuation">)</span>
  <span class="token property">min-width</span><span class="token punctuation">:</span> 125px<span class="token punctuation">;</span></span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>
  box-shadow <span class="token function">var</span><span class="token punctuation">(</span>--box-shadow<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
  .title
    margin-top 0
    margin-bottom .6rem
    font-weight bold
    color <span class="token function">var</span><span class="token punctuation">(</span>--regular-text<span class="token punctuation">)</span>
  .color-mode-options
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    flex-wrap wrap
    li
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      font-size 12px
      color <span class="token function">var</span><span class="token punctuation">(</span>--regular-text<span class="token punctuation">)</span>
      line-height 18px
      padding 3px 6px
      border-top 1px solid #666
      border-bottom 1px solid #666
      background-color <span class="token function">var</span><span class="token punctuation">(</span>--bg-color<span class="token punctuation">)</span>
      cursor pointer
      &amp;.dark
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px 0 0 3px
        border-left 1px solid #666
      &amp;.light
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 0 3px 3px 0
        border-right 1px solid #666
      &amp;.active
        <span class="token property">background-color</span><span class="token punctuation">:</span> $accentColor<span class="token punctuation">;</span>
        color #fff
      &amp;<span class="token punctuation">:</span><span class="token function">not</span><span class="token punctuation">(</span>.active<span class="token punctuation">)</span>
        border-right 1px solid #666
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>index.vue</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-click-outside</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hideMenu<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color-picker<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color-button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showMenu = !showMenu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			切换
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu-transition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showMenu<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color-picker-menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ModePicker</span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> ClickOutside <span class="token keyword">from</span> <span class="token string">'vue-click-outside'</span>
<span class="token keyword">import</span> ModePicker <span class="token keyword">from</span> <span class="token string">'./ModePicker'</span>
<span class="token keyword">import</span> applyMode <span class="token keyword">from</span> <span class="token string">'./applyMode'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'UserSettings'</span><span class="token punctuation">,</span>
  directives<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'click-outside'</span><span class="token operator">:</span> ClickOutside
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    ModePicker
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      showMenu<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 为了在保证 modePicker 在 SSR 中正确开关，并实现管理，Mode 组件将负责 modePicker 关闭的情况</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// modePicker 关闭时默认使用主题设置的模式</span>
    <span class="token keyword">const</span> themeMode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$themeConfig<span class="token punctuation">.</span>mode <span class="token operator">||</span> <span class="token string">'auto'</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> modePicker <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$themeConfig
    <span class="token keyword">if</span> <span class="token punctuation">(</span>modePicker <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 为 'auto' 模式设置监听器</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>themeMode <span class="token operator">===</span> <span class="token string">'auto'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">applyMode</span><span class="token punctuation">(</span>themeMode<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: light)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">applyMode</span><span class="token punctuation">(</span>themeMode<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token function">applyMode</span><span class="token punctuation">(</span>themeMode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">hideMenu</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>showMenu <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@require</span> <span class="token string">'../../styles/mode.styl'</span>
.color-picker</span> <span class="token punctuation">{</span>
	<span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
	<span class="token property">margin-right</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>
  cursor pointer<span class="token selector">;
	.color-button</span> <span class="token punctuation">{</span>
		<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token selector">;
		.iconfont</span> <span class="token punctuation">{</span>
			font-size 1.4rem
			<span class="token property">color</span><span class="token punctuation">:</span> $accentColor
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token selector">.color-picker-menu</span> <span class="token punctuation">{</span>
		<span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
		<span class="token property">top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
		<span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
		<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token property">z-index</span><span class="token punctuation">:</span> 150<span class="token selector">;
		&amp;.menu-transition-enter-active,
		&amp;.menu-transition-leave-active</span> <span class="token punctuation">{</span>
			<span class="token property">transition</span><span class="token punctuation">:</span> all 0.25s ease-in-out<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token selector">&amp;.menu-transition-enter,
		&amp;.menu-transition-leave-to</span> <span class="token punctuation">{</span>
			<span class="token property">top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
			<span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token selector">ul</span> <span class="token punctuation">{</span>
			<span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
			<span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
			<span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> $MQMobile<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
	<span class="token selector">.color-picker</span> <span class="token punctuation">{</span>
		<span class="token property">margin-right</span><span class="token punctuation">:</span> 1rem<span class="token selector">;
		.color-picker-menu</span> <span class="token punctuation">{</span>
			<span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - 35px<span class="token punctuation">)</span><span class="token selector">;
			&amp;::before</span> <span class="token punctuation">{</span>
				<span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% + 35px<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>「<strong>好，刹车，别往后滑了</strong>」</p> <p>上面的文件中使用到了一个工具需要自行安装：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> vue-click-outside -D
</code></pre></div><p>然后我们需要在项目中里面调用 Mode 组件，这里我选择了在 <code>docs/.vuepress/theme/components/Navbar.vue</code> 里面调用</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 前部分省略 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>links<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token selector">linksWrapMaxWidth ?</span> <span class="token punctuation">{</span></span>
<span class="token attr-value">        <span class="token string">'max-width'</span><span class="token punctuation">:</span> linksWrapMaxWidth + <span class="token string">'px'</span></span>
<span class="token attr-value">      <span class="token punctuation">}</span> <span class="token selector">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Mode</span> <span class="token punctuation">/&gt;</span></span>     <span class="token comment">&lt;!-- 搁这儿呢~ template 里就添加一行~ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AlgoliaSearchBox</span>
      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isAlgoliaSearch<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>algolia<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 后半部分省略 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">/* 前部分省略 */</span>
<span class="token keyword">import</span> Mode <span class="token keyword">from</span> <span class="token string">'@theme/components/Mode'</span> <span class="token comment">// 引入</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> SidebarButton<span class="token punctuation">,</span> NavLinks<span class="token punctuation">,</span> SearchBox<span class="token punctuation">,</span> AlgoliaSearchBox<span class="token punctuation">,</span> Mode <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 不想关的省略了</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>经过上面的修改之后，幸运的话，应该就可以是实现基本的亮色暗色主题的切换了。如果不是那么幸运的话，要多多在 devtools 里面调试，然后找到问题的源头，加油。</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519111515.png" alt=""></p> <p>这时候其实我们还差最后一步……</p> <h3 id="动态切换-element-ui-主题"><a href="#动态切换-element-ui-主题" class="header-anchor">#</a> 动态切换 Element UI 主题</h3> <p>上面「vuepress-theme-reco」的思路虽然实现了手动切换主题，但是并没有涉及到 Element UI 主题的切换，所以下一步就是实现动态切换 Element UI 主题。</p> <p>不知道读者有没有注意到，在上面的 <code>applyMode.js</code> 里面有这么一句：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token comment">// 渲染主题</span>
<span class="token keyword">function</span> <span class="token function">render</span> <span class="token punctuation">(</span><span class="token parameter">mode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// mode.styl</span>
  <span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">':root'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> modeOptions<span class="token punctuation">[</span>mode<span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> k <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rootElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> options<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 修改 body 的类</span>
  document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> mode <span class="token operator">+</span> <span class="token string">'-mode'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>加上这句话之后，在动态切换主题的同时会修改 body 元素的类，如果是暗色模式，body 的类就会变成 <code>dark-mode</code>，如果是亮色模式，body 的类就会变成 <code>light-mode</code>，那么如果我们在 ElementUI 的 css 文件里面，加上命名空间 <code>.dark-mode</code>，这不就能够实现动态切换主题了吗~；也就是说，原本的 <code>dark.css</code> 和 <code>light.css</code> 是这么定义的：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* dark.css */</span>
<span class="token selector">.el-button</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* light.css */</span>
<span class="token selector">.el-button</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当我们同时引入两个样式文件的时候，肯定是没有办法进行主题切换的，那么我们只要加上「前缀」就可以实现了，我们给 <code>dark.css</code> 加上 <code>.dark-mode</code> ，给 <code>light.css</code> 加上 <code>.light-mode</code> ：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* dark.css */</span>
<span class="token selector">.dark-mode .el-button</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* light.css */</span>
<span class="token selector">.light-mode .el-button</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样当 body 的类是 <code>dark-mode</code> 时，就会使用暗色的样式，否则就会使用亮色的样式。</p> <p>那么问题来了，加上前缀说起来容易，可是 <code>dark.css</code> 有一万多行……这可不是一般人能完成得了的。</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519111428.png" alt=""></p> <p>所以就需要使用「<a href="https://www.gulpjs.com.cn/" target="_blank" rel="noopener noreferrer">gulp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>」这个工具：</p> <p>首先安装这些工具：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">yarn</span> global <span class="token function">add</span> gulp gulp-clean-css gulp-css-wrap
</code></pre></div><p>然后创建 <code>docs/.vuepress/public/style/theme/gulpfile.js</code> ：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// gulpfile.js</span>

<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> cleanCSS <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-clean-css'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> cssWrap <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-css-wrap'</span><span class="token punctuation">)</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'css-wrap-dark'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./dark.css'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 样式文件</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cssWrap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>selector<span class="token operator">:</span> <span class="token string">'.dark-mode'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 前缀名称</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cleanCSS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 保存的路径，会生成 ./dist/dark.css</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'css-wrap-light'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./light.css'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cssWrap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>selector<span class="token operator">:</span> <span class="token string">'.light-mode'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cleanCSS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'move-font'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./fonts/**'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist/fonts'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这里我不清楚为什么对任务进行组合执行的时候会出问题，索性就分开执行吧！也不麻烦：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ gulp css-wrap-dark
$ gulp css-wrap-light
$ gulp move-font
</code></pre></div><p>这样我们就会得到下面这样的目录结构 <code>docs/.vuepress/public/style</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>style
 ├── config.json
 └── theme
     ├── dist
     │   ├── fonts
     │   ├── light.css // 转换后的样式表
     │   └── dark.css  // 转换后的样式表
     ├── fonts
     ├── gulpfile.js
     ├── light.css // 原始的样式表
     └── dark.css  // 原始的样式表
</code></pre></div><p>之后我们在 <code>enhanceApp.js</code> 里面「同时引入」这两个文件就好了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Element <span class="token keyword">from</span> <span class="token string">'element-ui'</span>
<span class="token keyword">import</span> <span class="token string">'./public/style/theme/dist/light.css'</span> <span class="token comment">// 转换后的样式表</span>
<span class="token keyword">import</span> <span class="token string">'./public/style/theme/dist/dark.css'</span>  <span class="token comment">// 转换后的样式表</span>
<span class="token keyword">import</span> animated <span class="token keyword">from</span> <span class="token string">'animate.css'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  Vue<span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Element<span class="token punctuation">,</span> animated<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当当当当，大功告成！撒花~撒花~撒花~</p> <p>这样做法是恰好适用于咱们的亮暗色模式切换，因为只有两个主题样式文件，要是样式很多的话，会导致样式文件很大，还是采用其他方法吧，看着配置好麻烦。</p> <p><img src="https://xerrors.oss-cn-shanghai.aliyuncs.com/imgs/20200519120409.gif" alt="动图演示"></p> <p>我的博客的项目文件可以参考 <a href="https://www.github.com/xerrors/Site" target="_blank" rel="noopener noreferrer">https://www.github.com/xerrors/Site<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="总结以及参考资料"><a href="#总结以及参考资料" class="header-anchor">#</a> 总结以及参考资料</h2> <p>这篇文章是我从创建博客网站以来写的时间最长的一篇文章，写了大概 6 个多小时，尽可能把每个过程写得容易理解，很难解释的地方画图来理解；写作的内容应该还有不少需要改进的地方，也希望读者能够给我提出一些建议。</p> <p>自从创建这个博客以来，每篇文章的访问量一般也就是个位数，最多的一篇是100+访问，相同的文章放在 CSDN 上面就会有更好的曝光度，访问量也更多；唉，写作之路很长，慢慢来，自己还只是这个领域的一个初学者，连入门者都算不上。</p> <p>如果觉得这篇文章对你的开发有所帮助的话，可以在<a href="https://www.xerrors.fun/vuepress-dark-mode/" target="_blank" rel="noopener noreferrer">博文<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>下方留言，写作者最需要的就是鼓励一直支持。</p> <p>[1] <a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">vuepress-theme-reco<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[2] <a href="https://zhuanlan.zhihu.com/p/78713832" target="_blank" rel="noopener noreferrer">暗黑模式的8个设计要点 - 知乎<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[3] <a href="https://www.zcool.com.cn/article/ZMTAxMjAxNg==.html" target="_blank" rel="noopener noreferrer">实践：拆解深色模式 文本配色 - 站酷 (ZCOOL)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[4] <a href="https://medium.com/uxabc/ios-13-8227dc9bcbb8" target="_blank" rel="noopener noreferrer">UX/UI 設計師的 iOS 13 攻略 - Medium<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[5] <a href="https://sspai.com/" target="_blank" rel="noopener noreferrer">少数派 - 高效工作，品质生活<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[6] <a href="https://ououe.com/lib/vuepress-theme-default-prefers-color-scheme.html" target="_blank" rel="noopener noreferrer">vuepress-theme-default-prefers-color-scheme | 雨无声<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[7] <a href="https://element.eleme.cn/#/zh-CN/theme" target="_blank" rel="noopener noreferrer">在线主题编辑器 - Element<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[8] <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-color-scheme" target="_blank" rel="noopener noreferrer">prefers-color-scheme - CSS（层叠样式表） | MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[9] <a href="https://blog.csdn.net/young_Emily/article/details/78591261" target="_blank" rel="noopener noreferrer">vue-基于elementui换肤[自定义主题] - CSDN博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[10] <a href="https://www.gulpjs.com.cn/" target="_blank" rel="noopener noreferrer">gulp.js - 基于流(stream)的自动化构建工具 | gulp.js 中文网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">修改于:</span> <span class="time">8/30/2020, 4:06:23 PM</span></div></footer> <!----> <div data-v-7cfe0aba><section class="page-edit" data-v-7cfe0aba><div id="vcomments" data-v-7cfe0aba></div></section></div></div> <div class="my-main-right"><div style="font-size:14px"><a href="https://me.csdn.net/jaykm" target="_blank">CSDN</a>    
        <a href="https://github.com/Yiyuery" target="_blank">GitHub</a>   
        <a href="https://juejin.im/user/5c17f022f265da616c65862f" target="_blank">掘金</a>   
        <a href="mailto:xiazhaoyang@live.com">邮件</a></div> <div class="my-menu"><h4 style="margin-top: 0;">目录</h4> <a href="/vuepress-dark-mode/#_1-前言" class="my-menu__lv2">1. 前言</a><a href="/vuepress-dark-mode/#_2-设计主题配色" class="my-menu__lv2">2. 设计主题配色</a><a href="/vuepress-dark-mode/#_3-测试亮色以及暗色的表现" class="my-menu__lv2">3. 测试亮色以及暗色的表现</a><a href="/vuepress-dark-mode/#全局颜色管理" class="my-menu__lv3">全局颜色管理</a><a href="/vuepress-dark-mode/#element-ui-的自定义主题" class="my-menu__lv3">Element UI 的自定义主题</a><a href="/vuepress-dark-mode/#_4-实现主题的切换功能" class="my-menu__lv2">4. 实现主题的切换功能</a><a href="/vuepress-dark-mode/#css-媒体特性" class="my-menu__lv3">CSS 媒体特性</a><a href="/vuepress-dark-mode/#css变量" class="my-menu__lv3">CSS变量</a><a href="/vuepress-dark-mode/#创建-mode-组件" class="my-menu__lv3">创建 Mode 组件</a><a href="/vuepress-dark-mode/#动态切换-element-ui-主题" class="my-menu__lv3">动态切换 Element UI 主题</a><a href="/vuepress-dark-mode/#总结以及参考资料" class="my-menu__lv2">总结以及参考资料</a></div></div></div> </main></div> <div class="footer">
    © 2019-2020 ❤️ Yiyuery<br> <a href="http://www.beian.miit.gov.cn" target="_blank">皖 ICP 备 19016269 号</a><br> <a href="https://me.csdn.net/jaykm" target="_blank">CSDN</a>    
    <a href="https://github.com/Xerrors" target="_blank">GitHub</a>   
    <a href="https://juejin.im/user/5c17f022f265da616c65862f" target="_blank">掘金</a><br> <a href="mailto:xiazhaoyang@live.com">发送邮件</a></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.839ced15.js" defer></script><script src="/assets/js/4.3fbc1f96.js" defer></script><script src="/assets/js/45.e77b2e3a.js" defer></script>
  </body>
</html>
