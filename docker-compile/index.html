<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 安装并配置 | Yiyuery</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/favicon.ico">
    <meta name="description" content="Yiyuery's 个人博客">
    <link rel="preload" href="/assets/css/0.styles.fac40609.css" as="style"><link rel="preload" href="/assets/js/app.839ced15.js" as="script"><link rel="preload" href="/assets/js/4.3fbc1f96.js" as="script"><link rel="preload" href="/assets/js/31.0f4cfbf5.js" as="script"><link rel="prefetch" href="/assets/js/1.43a347b2.js"><link rel="prefetch" href="/assets/js/10.9753ee5d.js"><link rel="prefetch" href="/assets/js/11.96c59566.js"><link rel="prefetch" href="/assets/js/12.2c50efec.js"><link rel="prefetch" href="/assets/js/13.5d6e55a8.js"><link rel="prefetch" href="/assets/js/14.fc442e96.js"><link rel="prefetch" href="/assets/js/15.24339c79.js"><link rel="prefetch" href="/assets/js/16.1587d289.js"><link rel="prefetch" href="/assets/js/17.44142bfd.js"><link rel="prefetch" href="/assets/js/18.994bb200.js"><link rel="prefetch" href="/assets/js/19.ca759cda.js"><link rel="prefetch" href="/assets/js/2.52d476cc.js"><link rel="prefetch" href="/assets/js/20.979ad63c.js"><link rel="prefetch" href="/assets/js/21.fecc9d80.js"><link rel="prefetch" href="/assets/js/22.3e99d924.js"><link rel="prefetch" href="/assets/js/23.951d9b97.js"><link rel="prefetch" href="/assets/js/24.bad04352.js"><link rel="prefetch" href="/assets/js/25.ce195067.js"><link rel="prefetch" href="/assets/js/26.7b3581a7.js"><link rel="prefetch" href="/assets/js/27.efc77ae3.js"><link rel="prefetch" href="/assets/js/28.16eb2f91.js"><link rel="prefetch" href="/assets/js/29.7772d15e.js"><link rel="prefetch" href="/assets/js/30.3870d4d1.js"><link rel="prefetch" href="/assets/js/32.29d81c04.js"><link rel="prefetch" href="/assets/js/33.28affd1f.js"><link rel="prefetch" href="/assets/js/34.d28c7114.js"><link rel="prefetch" href="/assets/js/35.d7bb0604.js"><link rel="prefetch" href="/assets/js/36.ebab3576.js"><link rel="prefetch" href="/assets/js/37.0eb5a00d.js"><link rel="prefetch" href="/assets/js/38.9db427c3.js"><link rel="prefetch" href="/assets/js/39.53ecfed9.js"><link rel="prefetch" href="/assets/js/40.b2df18d9.js"><link rel="prefetch" href="/assets/js/41.b6970575.js"><link rel="prefetch" href="/assets/js/42.5d438713.js"><link rel="prefetch" href="/assets/js/43.0f984b43.js"><link rel="prefetch" href="/assets/js/44.4a9567c2.js"><link rel="prefetch" href="/assets/js/45.e77b2e3a.js"><link rel="prefetch" href="/assets/js/46.db689d82.js"><link rel="prefetch" href="/assets/js/47.ca290c98.js"><link rel="prefetch" href="/assets/js/48.cc29300b.js"><link rel="prefetch" href="/assets/js/49.f43fa070.js"><link rel="prefetch" href="/assets/js/5.8663838d.js"><link rel="prefetch" href="/assets/js/50.5ac4404a.js"><link rel="prefetch" href="/assets/js/51.20121ae0.js"><link rel="prefetch" href="/assets/js/52.d225ba88.js"><link rel="prefetch" href="/assets/js/53.adeb5a3a.js"><link rel="prefetch" href="/assets/js/54.a4dc7855.js"><link rel="prefetch" href="/assets/js/55.4b88ddc7.js"><link rel="prefetch" href="/assets/js/56.a13331f5.js"><link rel="prefetch" href="/assets/js/57.885d087b.js"><link rel="prefetch" href="/assets/js/58.a3064fd9.js"><link rel="prefetch" href="/assets/js/59.7e0d1f6e.js"><link rel="prefetch" href="/assets/js/6.83d9063b.js"><link rel="prefetch" href="/assets/js/60.33d66471.js"><link rel="prefetch" href="/assets/js/61.d332eaa5.js"><link rel="prefetch" href="/assets/js/62.8eaf5a15.js"><link rel="prefetch" href="/assets/js/63.6e0c7f61.js"><link rel="prefetch" href="/assets/js/64.17534d3f.js"><link rel="prefetch" href="/assets/js/65.40d814d7.js"><link rel="prefetch" href="/assets/js/66.9279a738.js"><link rel="prefetch" href="/assets/js/67.5cdb9fd6.js"><link rel="prefetch" href="/assets/js/68.26c5c99d.js"><link rel="prefetch" href="/assets/js/69.d349f923.js"><link rel="prefetch" href="/assets/js/7.6cb83fee.js"><link rel="prefetch" href="/assets/js/8.d6104416.js"><link rel="prefetch" href="/assets/js/9.c85ef583.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fac40609.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><!----> <div id="my-bg"></div> <header class="navbar my-nav"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logoko.png" alt="Yiyuery" class="logo"> <span class="site-name can-hide">Yiyuery</span></a> <div class="links"><div class="color-picker"><a class="color-button">
		切换
	</a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">切换主题</h4> <ul class="color-mode-options"><li class="dark">暗</li><li class="auto active">自动</li><li class="light">亮</li></ul></div></div></div> <!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">📃 文章</a></div><div class="nav-item"><a href="/zhuanlan/" class="nav-link">📰 专栏</a></div><div class="nav-item"><a href="/zone/" class="nav-link">🤪 动态</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔨 工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">🚥 导航</a></li><li class="dropdown-item"><!----> <a href="/links/" class="nav-link">🔗 友链</a></li></ul></div></div> <!----></nav> <a href="https://github.com/Yiyuery/" target="_blank" class="can-hide" style="display: flex; align-items: center; margin-left: 10px;"><img src="/github.png" class="my-svg" style="width: 1.4rem; height: 1.4rem;"></a></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">📃 文章</a></div><div class="nav-item"><a href="/zhuanlan/" class="nav-link">📰 专栏</a></div><div class="nav-item"><a href="/zone/" class="nav-link">🤪 动态</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔨 工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">🚥 导航</a></li><li class="dropdown-item"><!----> <a href="/links/" class="nav-link">🔗 友链</a></li></ul></div></div> <!----></nav>  <!----> </aside> <div><main class="page need-zoom"> <div class="my-main"><div class="my-main-left"><div class="my-title-box"><h2>Docker 安装并配置</h2> <div class="my-title-info"><span id="/docker-compile/" data-flag-title="Docker 安装并配置" class="leancloud-visitors"><span>作者：玉川</span>  
            <span>2019 年 8 月 18 日  </span> <i class="el-icon-view" style="margin-right: 3px;"></i> <span class="leancloud-visitors-count"></span></span></div></div> <div class="theme-default-content content__default"><p>因为自身电脑是 Windows，使用 Docker 并不是很方便，加上自己的很多工作都是在服务器上完成，所以打算将自己在服务器上面运行的服务都用 Docker 来管理。</p> <p>参考</p> <ul><li><a href="https://docs.docker.com" target="_blank" rel="noopener noreferrer">Docker 官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://yeasy.gitbooks.io/docker_practice/introduction/" target="_blank" rel="noopener noreferrer">Docker 从入门到实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cnblogs.com/sujing/p/11012115.html#top" target="_blank" rel="noopener noreferrer">Docker 指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>这篇博客的环境是 Ubuntu 16.04</p> <h3 id="安装-docker"><a href="#安装-docker" class="header-anchor">#</a> 安装 Docker</h3> <p>这里为了方便就采用了官方的自动脚本安装</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">curl</span> -fsSL get.docker.com -o get-docker.sh
$ <span class="token function">sudo</span> <span class="token function">sh</span> get-docker.sh --mirror Aliyun
</code></pre></div><p>建立用户组并添加 Docker 用户</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 建立 docker 组</span>
$ <span class="token function">sudo</span> <span class="token function">groupadd</span> docker 

<span class="token comment"># 将当前用户加入 docker 组</span>
$ <span class="token function">sudo</span> <span class="token function">usermod</span> -aG docker <span class="token environment constant">$USER</span>
</code></pre></div><h3 id="查看-docker-的基本信息"><a href="#查看-docker-的基本信息" class="header-anchor">#</a> 查看 Docker 的基本信息</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker version <span class="token comment"># 查看版本信息</span>

$ docker info <span class="token comment"># Docker 的基本信息，容器数量、镜像数量、根目录等</span>

$ docker --help <span class="token comment"># 查看帮助信息</span>
</code></pre></div><h3 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h3> <h4 id="镜像相关的命令"><a href="#镜像相关的命令" class="header-anchor">#</a> 镜像相关的命令</h4> <p>容器相关的命令都比较简单就不分开说了，就到下面很容易看懂</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker images <span class="token comment"># 查看本地的镜像</span>

$ docker rmi <span class="token punctuation">[</span>name/id<span class="token punctuation">]</span> <span class="token comment"># 删除一个镜像</span>

$ docker search <span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token comment"># 搜索远程镜像</span>

$ docker pull <span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token comment"># 从远程拉取一个镜像</span>
</code></pre></div><p>实例</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker search ubuntu <span class="token comment"># 默认使用 latest 标签，拉取最新版本</span>

$ docker pull ubuntu
</code></pre></div><h4 id="容器相关命令"><a href="#容器相关命令" class="header-anchor">#</a> 容器相关命令</h4> <p><strong>首先是运行</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 测试使用的指令</span>
$ docker run -it --rm ubuntu <span class="token function">bash</span>
</code></pre></div><p>docker run 是运行容器的命令，完整的指令是</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre></div><p>这里简要的说明一下上面用到的参数。</p> <p><code>-it</code>：运行容器的时候启动一个交互式终端，方便我们操作容器</p> <p><code>--rm</code>：这个参数是说容器退出后随之将其删除，使用 <code>--rm</code> 可以避免浪费空间。</p> <p><code>ubuntu</code>：这是指用 <code>ubuntu</code> 镜像为基础来启动容器。</p> <p><code>bash</code>：放在镜像名后的是 <code>命令</code>，这里我们希望有个交互式 Shell，因此用的是 bash。</p> <p>详细的参数如下（挺多的，摘录别人的）：</p> <div class="language- extra-class"><pre class="language-text"><code>-d:启动容器，并且后台运行；
-i:以交互模式运行容器，通常与-t同时使用；
-t:为容器重新分配一个伪输入终端，通常与-i同时使用（容器启动后进入到容器内部的命令窗口）；
-P:随机端口映射，容器内部端口随机映射到主机的高端口；
-p:指定端口映射，格式为：主机(宿主)端口:容器端口；
-v:建立宿主机与容器目录的同步；
--name=&quot;myTomcat&quot;: 为容器指定一个名称，否则有个随机的名字）；
</code></pre></div><p>上面的内容又臭又长，我们只需要根据自己的需要记住几个命令就好</p> <ol><li>如果你需要启动一个镜像用来测试一下系统的功能，下次不会再用，可以使用这个命令，实现的功能是启动一个容器并分配一个交互式终端，当退出之后会自动销毁。</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker run -it --rm ubuntu <span class="token function">bash</span>
</code></pre></div><ol start="2"><li>如果需要启动一个容器需要经常使用，同时还需要保存一些文件的。</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker run -it -v /root/ubuntu_wp:/root ubuntu <span class="token function">bash</span>
</code></pre></div><ol start="3"><li>如果同时需要绑定端口，后台运行服务</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker run -d -p <span class="token number">8080</span>:8080 -v /root/ubuntu_wp:/root ubuntu <span class="token punctuation">[</span>command<span class="token punctuation">]</span>
</code></pre></div><p><strong>docker ps</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker <span class="token function">ps</span> <span class="token comment"># 查看正在运行的容器的信息，</span>

$ docker <span class="token function">ps</span> -a <span class="token comment"># 查看运行中的和已经停止的容器</span>
</code></pre></div><p><strong>再次进入正在运行中的容器</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker attach <span class="token number">67</span> <span class="token comment"># 进入正在运行中且id 的为前缀是 67 的容器</span>

$ docker <span class="token builtin class-name">exec</span> <span class="token number">67</span> <span class="token comment"># 进入正在运行中且id 的为前缀是 67 的容器</span>
</code></pre></div><p><code>exec</code> 与 <code>attach</code> 一样都可以再次进入后台运行的容器，但是该命令可以不进入容器而在运行的容器中执行命令。</p> <p><strong>停止、终止、重启容器</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker stop <span class="token punctuation">[</span>id<span class="token punctuation">]</span>  <span class="token comment"># 停止容器</span>

$ docker <span class="token function">kill</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span>  <span class="token comment"># 强制停止容器</span>

$ docker restart <span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token comment"># 重启容器</span>
</code></pre></div><p><strong>删除容器</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker <span class="token function">rm</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token comment"># 删除容器</span>
</code></pre></div><p><strong>启动已终止容器</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker container start <span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token comment"># 直接将一个已经终止的容器启动运行</span>
</code></pre></div><h3 id="在-docker-部署-vuepress"><a href="#在-docker-部署-vuepress" class="header-anchor">#</a> 在 Docker 部署 Vuepress</h3> <h4 id="布置镜像"><a href="#布置镜像" class="header-anchor">#</a> 布置镜像</h4> <p>首先拉取 node 镜像，免得自己安装，当然，也可以直接拉取别人部署好了的 vuepress 镜像，但是上面的镜像良莠不齐，还是自己搭建吧，放心一点</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 拉取镜像</span>
$ docker pull node 

<span class="token comment"># 尝试运行</span>
$ docker run -it --rm node <span class="token function">bash</span>

<span class="token comment"># 查看是否成功（一般都是成功滴）</span>
$ node --version
</code></pre></div><p>之后就可以退出这个容器，再次进入，这次我们进入的时候绑定好端口，绑定好路径映射运行</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 运行指令</span>
$ docker run -it -p <span class="token number">8080</span>:8080 -v /Site/docs:/root/vuepress node <span class="token function">bash</span>
</code></pre></div><h4 id="安装环境"><a href="#安装环境" class="header-anchor">#</a> 安装环境</h4> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 切换路径</span>
$ <span class="token builtin class-name">cd</span> /root/vuepress

<span class="token comment"># 安装 Vuepress</span>
$ <span class="token function">npm</span> <span class="token function">install</span> -g vuepress

<span class="token comment"># 安装依赖</span>
$ <span class="token function">npm</span> <span class="token function">install</span> 
</code></pre></div><p>现在问题来了，在Docker运行的时候，端口是随机的。这咋整呢，，不晓的，以后再说。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">修改于:</span> <span class="time">8/30/2020, 4:06:23 PM</span></div></footer> <!----> <div data-v-7cfe0aba><section class="page-edit" data-v-7cfe0aba><div id="vcomments" data-v-7cfe0aba></div></section></div></div> <div class="my-main-right"><div style="font-size:14px"><a href="https://me.csdn.net/jaykm" target="_blank">CSDN</a>    
        <a href="https://github.com/Yiyuery" target="_blank">GitHub</a>   
        <a href="https://juejin.im/user/5c17f022f265da616c65862f" target="_blank">掘金</a>   
        <a href="mailto:xiazhaoyang@live.com">邮件</a></div> <div class="my-menu"><h4 style="margin-top: 0;">目录</h4> <a href="/docker-compile/#安装-docker" class="my-menu__lv3">安装 Docker</a><a href="/docker-compile/#查看-docker-的基本信息" class="my-menu__lv3">查看 Docker 的基本信息</a><a href="/docker-compile/#常用命令" class="my-menu__lv3">常用命令</a><a href="/docker-compile/#在-docker-部署-vuepress" class="my-menu__lv3">在 Docker 部署 Vuepress</a></div></div></div> </main></div> <div class="footer">
    © 2019-2020 ❤️ Yiyuery<br> <a href="http://www.beian.miit.gov.cn" target="_blank">皖 ICP 备 19016269 号</a><br> <a href="https://me.csdn.net/jaykm" target="_blank">CSDN</a>    
    <a href="https://github.com/Xerrors" target="_blank">GitHub</a>   
    <a href="https://juejin.im/user/5c17f022f265da616c65862f" target="_blank">掘金</a><br> <a href="mailto:xiazhaoyang@live.com">发送邮件</a></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.839ced15.js" defer></script><script src="/assets/js/4.3fbc1f96.js" defer></script><script src="/assets/js/31.0f4cfbf5.js" defer></script>
  </body>
</html>
